import{j as e,r as i,R as U}from"./react-0b305352.js";import{c as F}from"./react-dom-ff2d3459.js";import{I as E,a as I,b as w,c as C,d as D,e as M,f as B,g as T,h as m,i as f,j as g,k as y,l as O,m as k,n as A,o as b,p as L,q as N,s as $,r as q,t as H,u as K}from"./@ionic-68aa6004.js";import{u as z,b as J,R,d as G}from"./react-router-a7898cd7.js";import{L as Q}from"./react-router-dom-b6726e4d.js";import"./hoist-non-react-statics-37e8c86a.js";import"./scheduler-765c72db.js";import"./@stencil-ba8338df.js";import"./tslib-6635c9de.js";import"./history-af4b99fa.js";import"./@babel-47f85c78.js";import"./resolve-pathname-e210f2ac.js";import"./value-equal-17d7769a.js";import"./tiny-invariant-dd7d57d2.js";import"./ionicons-2bb8f5b5.js";import"./prop-types-a154a2ae.js";import"./path-to-regexp-5f40098f.js";function ne(){import.meta.url,import("_").catch(()=>1);async function*c(){}}(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function x(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(t){if(t.ep)return;t.ep=!0;const r=x(t);fetch(t.href,r)}})();const V=()=>e.jsxs(E,{children:[e.jsx(I,{children:e.jsx(w,{children:e.jsx(C,{children:"Project Management App"})})}),e.jsxs(D,{fullscreen:!0,children:[e.jsx(I,{collapse:"condense",children:e.jsx(w,{children:e.jsx(C,{size:"large",children:"Blank"})})}),e.jsx(M,{children:e.jsxs(B,{children:[e.jsxs(T,{children:[e.jsx(I,{children:e.jsx(w,{children:e.jsx(C,{size:"large",children:"Backlog"})})}),e.jsx(m,{children:e.jsxs(f,{children:[e.jsx(g,{children:"Story Name"}),e.jsx(y,{children:"Dev/Unassigned"})]})}),e.jsx(m,{children:e.jsxs(f,{children:[e.jsx(g,{children:"Refactor the project"}),e.jsx(y,{children:"Keegan Sims"})]})}),e.jsx(m,{children:e.jsxs(f,{children:[e.jsx(g,{children:"Create Documents"}),e.jsx(y,{children:"Sam Bloomingdale"})]})})]}),e.jsxs(T,{children:[e.jsx(I,{children:e.jsx(w,{children:e.jsx(C,{size:"large",children:"In Progress"})})}),e.jsx(m,{children:e.jsxs(f,{children:[e.jsx(g,{children:"UI Design"}),e.jsx(y,{children:"Brian Tran"})]})}),e.jsx(m,{children:e.jsxs(f,{children:[e.jsx(g,{children:"Task Functions"}),e.jsx(y,{children:"Camden Murphy"})]})}),e.jsx(m,{children:e.jsxs(f,{children:[e.jsx(g,{children:"Task ordering"}),e.jsx(y,{children:"Keegan Sims"})]})}),e.jsx(m,{children:e.jsxs(f,{children:[e.jsx(g,{children:"Build & bug fix"}),e.jsx(y,{children:"Keegan Sims"})]})})]}),e.jsxs(T,{children:[e.jsx(I,{children:e.jsx(w,{children:e.jsx(C,{size:"large",children:"Finished"})})}),e.jsx(m,{children:e.jsxs(f,{children:[e.jsx(g,{children:"Q/A Testing"}),e.jsx(y,{children:"Camden Murphy"})]})}),e.jsxs(m,{children:[" ",e.jsxs(f,{children:[e.jsx(g,{children:"EC2 Set up"}),e.jsx(y,{children:"Sam Bloomingdale"})]})]}),e.jsx(m,{children:e.jsxs(f,{children:[e.jsx(g,{children:"Database Set up"}),e.jsx(y,{children:"Sam Bloomingdale"})]})}),e.jsx(m,{children:e.jsxs(f,{children:[e.jsx(g,{children:"Express Server"}),e.jsx(y,{children:"Sam Bloomingdale"})]})})]})]})})]})]}),W=()=>{const[c,p]=i.useState(""),[x,s]=i.useState(""),[t,r]=i.useState(!1),l=z(),d=n=>{const j=n.target.name,S=n.target.value;j==="username"&&p(S),j==="password"&&s(S)},h=async n=>{n.preventDefault();const j="http://ec2-52-13-3-131.us-west-2.compute.amazonaws.com:3000",S=t?"/api/users/register":"/api/users/signin",_="".concat(j).concat(S);try{const o=await fetch(_,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:c,password:x})});if(o.ok){const P=await o.json();alert(P.message),localStorage.setItem("userId",P.userId),localStorage.setItem("username",c),t||l.push("/projects")}else if(o.status===409)alert("Error: User already exists");else if(o.status===401)alert("Error: Invalid username or password");else{const P=await o.text();alert("Error: "+P)}}catch(o){console.error("Error:",o),alert("An error occurred while processing your request.")}};return e.jsxs(E,{children:[e.jsx(I,{children:e.jsx(w,{children:e.jsx(C,{children:t?"Register":"Sign In"})})}),e.jsx(D,{fullscreen:!0,children:e.jsx(M,{children:e.jsx(B,{children:e.jsx(T,{sizeMd:"6",offsetMd:"3",children:e.jsxs("form",{onSubmit:h,children:[e.jsxs(O,{children:[e.jsx(k,{position:"floating",children:"Username"}),e.jsx(A,{type:"text",name:"username",value:c,onIonChange:d,required:!0})]}),e.jsxs(O,{children:[e.jsx(k,{position:"floating",children:"Password"}),e.jsx(A,{type:"password",name:"password",value:x,onIonChange:d,required:!0})]}),e.jsx(b,{expand:"block",type:"submit",children:t?"Register":"Sign In"}),e.jsx(b,{expand:"block",fill:"clear",onClick:()=>r(!t),children:t?"Already have an account? Sign In":"Need an account? Register"})]})})})})})]})},X=({onProjectCreation:c,username:p})=>{const[x,s]=i.useState(""),[t,r]=i.useState(""),l=async d=>{d.preventDefault();try{const h=await fetch("http://ec2-52-13-3-131.us-west-2.compute.amazonaws.com:3000/api/projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:x,description:t})}),n=await h.json();h.ok?(alert("Project created successfully: "+n.projectId),(await fetch("http://ec2-52-13-3-131.us-west-2.compute.amazonaws.com:3000/api/projects/".concat(n.projectId,"/users/").concat(p),{method:"POST"})).ok?alert("User ".concat(p," added to project successfully")):alert("Failed to add user to project"),await c()):alert("Failed to create project")}catch(h){console.error("Error in operation:",h),alert("Error in operation")}};return e.jsxs("form",{onSubmit:l,children:[e.jsx("input",{type:"text",value:x,onChange:d=>s(d.target.value),placeholder:"Title"}),e.jsx("textarea",{value:t,onChange:d=>r(d.target.value),placeholder:"Description"}),e.jsx("button",{type:"submit",children:"Create Project"})]})},Y=()=>{const[c,p]=i.useState([]),[x,s]=i.useState(!0),[t,r]=i.useState(!1),l=localStorage.getItem("username");i.useEffect(()=>{d()},[]);const d=async()=>{const n=localStorage.getItem("userId");if(n)try{const j=await fetch("http://ec2-52-13-3-131.us-west-2.compute.amazonaws.com:3000/api/users/".concat(n,"/projects"));if(j.ok){const S=await j.json();p(S)}else alert("Failed to fetch projects")}catch(j){console.error("Error fetching projects:",j),alert("Error fetching projects")}else alert("User ID not found");s(!1)},h=async()=>{r(!1),await d()};return x?e.jsx(k,{children:"Loading..."}):e.jsxs(E,{children:[e.jsx(I,{children:e.jsxs(w,{children:[e.jsx(C,{children:"Projects"}),e.jsx(b,{slot:"end",onClick:()=>r(!0),children:"Create New Project"})]})}),e.jsxs(D,{fullscreen:!0,children:[e.jsxs(L,{isOpen:t,children:[e.jsx(X,{onProjectCreation:h,username:l}),e.jsx(b,{onClick:()=>r(!1),children:"Close"})]}),e.jsx(N,{children:c.map(n=>e.jsx(Q,{to:"/projects/".concat(n._id),children:e.jsx(O,{children:e.jsxs(k,{children:[e.jsx("h2",{children:n._title}),e.jsx("p",{children:n._description}),e.jsxs("p",{children:["Created at: ",new Date(n._created_at).toLocaleDateString()]})]})})},n._id))})]})]})},Z=({onTicketAddition:c,created_by:p,project_id:x,assigned_by:s})=>{const[t,r]=i.useState(""),[l,d]=i.useState(""),[h,n]=i.useState(""),[j,S]=i.useState(""),_=async o=>{let P=new Date,a=new Date;o.preventDefault();try{const u=await fetch("http://ec2-52-13-3-131.us-west-2.compute.amazonaws.com:3000/api/tickets/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:x,created_by:p,assigned_by:s,title:t,description:l,type:h,priority:j,created_at:P,modified_at:a})}),v=await u.json();u.ok?(alert("Ticket created successfully: "+v.id),await c()):alert("Failed to create ticket")}catch(u){console.error("Error in operation:",u),alert("Error in operation")}};return e.jsxs("form",{onSubmit:_,children:[e.jsx("input",{type:"text",value:t,onChange:o=>r(o.target.value),placeholder:"Title"}),e.jsx("textarea",{value:l,onChange:o=>d(o.target.value),placeholder:"Description"}),e.jsx("input",{type:"text",value:h,onChange:o=>n(o.target.value),placeholder:"Type"}),e.jsx("input",{type:"number",value:j,onChange:o=>S(o.target.value),placeholder:"Priority"}),e.jsx("button",{type:"submit",children:"Add Ticket"})]})},ee=()=>{const{projectId:c}=J(),[p,x]=i.useState([]),[s,t]=i.useState(null),[r,l]=i.useState(!1),[d,h]=i.useState(!1),n=z(),j=()=>{n.push("/projects")};i.useEffect(()=>{S()},[c]);const S=async()=>{try{const a=await fetch("http://ec2-52-13-3-131.us-west-2.compute.amazonaws.com:3000/api/projects/".concat(c,"/tickets"));if(a.ok){const u=await a.json();x(u)}}catch(a){console.error("Error fetching tickets:",a)}},_=a=>{t(a),l(!0)},o=async()=>{h(!1),await S()},P=p.reduce((a,u)=>{const v=u._type;return a[v]=a[v]||[],a[v].push(u),a},{});return e.jsxs(E,{children:[e.jsxs(I,{children:[e.jsxs(w,{children:[e.jsx(C,{children:"Project Board"}),e.jsx(b,{slot:"end",onClick:j,children:"Back to Projects"}),e.jsx(b,{slot:"end",onClick:()=>h(!0),children:"Add Ticket"})]}),e.jsxs(L,{isOpen:d,children:[e.jsx(Z,{onTicketAddition:o,project_id:c,created_by:localStorage.getItem("userId"),assigned_by:null}),e.jsx(b,{onClick:()=>h(!1),children:"Close"})]})]}),e.jsxs(D,{fullscreen:!0,children:[e.jsx(M,{children:e.jsx(B,{children:Object.keys(P).map(a=>e.jsxs(T,{children:[e.jsx(I,{children:e.jsx(w,{children:e.jsx(C,{size:"large",children:a})})}),P[a].map(u=>e.jsx(m,{onClick:()=>_(u),children:e.jsxs(f,{children:[e.jsx(g,{children:u._title}),e.jsxs(y,{children:["Priority: ",u._priority]})]})},u._id))]},a))})}),e.jsx(L,{isOpen:r,onDidDismiss:()=>l(!1),children:e.jsxs(D,{children:[e.jsx(I,{children:e.jsx(w,{children:e.jsx(C,{children:"Ticket Details"})})}),e.jsxs("div",{style:{padding:"15px"},children:[e.jsxs("h2",{children:["Title: ",s==null?void 0:s._title]}),e.jsxs("p",{children:["Priority: ",s==null?void 0:s._priority]}),e.jsxs("p",{children:["Description: ",s==null?void 0:s._description]}),e.jsxs("p",{children:["Type: ",s==null?void 0:s._type]}),e.jsxs("p",{children:["Assigned To: ",s==null?void 0:s._assigned_to]}),e.jsxs("p",{children:["Created By: ",s==null?void 0:s._created_by]}),e.jsxs("p",{children:["Created At: ",s==null?void 0:s._created_at.toLocaleString()]}),e.jsxs("p",{children:["Modified At: ",s==null?void 0:s._modified_at.toLocaleString()]})]})]})})]})]})};$();const se=()=>e.jsx(q,{children:e.jsx(H,{children:e.jsxs(K,{placeholder:"",children:[e.jsx(R,{exact:!0,path:"/home",children:e.jsx(V,{})}),e.jsx(R,{exact:!0,path:"/signin",children:e.jsx(W,{})}),e.jsx(R,{exact:!0,path:"/projects",children:e.jsx(Y,{})}),e.jsx(R,{path:"/projects/:projectId",children:e.jsx(ee,{})}),e.jsx(R,{exact:!0,path:"/",children:e.jsx(G,{to:"/signin"})})]})})}),te=document.getElementById("root"),re=F(te);re.render(e.jsx(U.StrictMode,{children:e.jsx(se,{})}));export{ne as __vite_legacy_guard};
